<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">

    <title>Color converter</title>
</head>
<body>
    <main>
        <div class="upper">
            <h1 id="title">Color converter</h1>
                <button id="leftButton" type="button" onclick="leftButtonClick(this)" style="display: none">Copy</button>
                <button id="rightButton" type="button" onclick="rightButtonClick(this)" style="display: none">Copy</button>
        </div>
        <div class="lower">
            <input id="input" type="text" placeholder="hex, rgb or a html colorname">
            <p id="explainText">
                Hex: xxx, xxxxxx, #xxx, #xxxxxx. \nRgb: rgb(x,x,x), (x,x,x), x,x,x)
            </p>
        </div>

    </main>

    <script>
        var rightCopyValue = "";
        var leftCopyValue = "";

        /**
         * User click for copying the right text
         */
        function rightButtonClick(elm) {
            if (document.queryCommandSupported('copy')) {
                ColorConverter.Utils.copy(rightCopyValue);
            }
        }

        /**
         * User click for copying the left text
         */
        function leftButtonClick(elm) {
            if (document.queryCommandSupported('copy')) {
                ColorConverter.Utils.copy(leftCopyValue);
            }
        }

        document.addEventListener("DOMContentLoaded", function(event) {
            var input = document.getElementById('input');
            var leftButton = document.getElementById('leftButton');
            var rightButton = document.getElementById('rightButton');
            var title = document.getElementById('title');
            var explainText = document.getElementById('explainText');


            var copyExplain = 'Copy the hex, rgb or colorname by pressing the button(s)';
            var inputExplain = 'Hex: xxx, xxxxxx, #xxx, #xxxxxx. <br>Rgb: rgb(x,x,x), (x,x,x), x,x,x';

            explainText.innerHTML = inputExplain;


            input.addEventListener('input', setColor)

            // Sets the background color of body, and buttons,
            // and the text color of all
            function setColor(e) {
                var color = ColorConverter.convert(e.target.value);
                console.log(color);
                if (color.out_left === '') {
                    leftButton.style.display = "none";
                    explainText.innerHTML = inputExplain;
                } else {
                    explainText.innerHTML = copyExplain;
                    leftCopyValue  = color.out_left;
                    leftButton.style.display = "flex";
                    leftButton.setAttribute("style", "background: " + color.textColor + "; color: " + color.background + ";");
                    leftButton.innerHTML = leftCopyValue;
                }


                if (color.out_right === '') {
                    rightButton.style.display = "none";
                    explainText.innerHTML = inputExplain;
                } else {
                    explainText.innerHTML = copyExplain;
                    rightCopyValue  = color.out_right;
                    rightButton.style.display = "flex";
                    rightButton.setAttribute("style", "background: " + color.textColor + "; color: " + color.background + ";");
                    rightButton.innerHTML = rightCopyValue;
                }

                title.setAttribute("style", "color: " + color.textColor + ";");
                document.body.setAttribute("style", "background: " + color.background + "; color: " + color.textColor + ";");
            }
        });
    </script>
</body>
</html>



